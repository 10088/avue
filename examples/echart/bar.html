<!DOCTYPE html>

<html class="no-js">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title></title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.bootcss.com/vue/2.5.17/vue.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.4.11/index.js"></script>
  <script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.4.11/theme-chalk/index.css" />
  <link rel="stylesheet" href="../../../lib/index.css" />
  <link rel="stylesheet" href="./common.css">
  <script src="../../../lib/avue.js"></script>
</head>

<body>
  <div id="app">
    <div class="left">
      <avue-echart-bar :option="option"></avue-echart-bar>
    </div>
    <div class="right">
      <avue-form :option="formOption" v-model="config">
        <template slot="barColor" slot-scope="scope">
          <avue-crud :option="colorOption" :data="config.barColor" @row-save="rowSave" @row-del="rowDel"
            @row-update="rowUpdate"></avue-crud>
        </template>
      </avue-form>
    </div>
  </div>
</body>
<script>

  new Vue({
    el: '#app',
    data() {
      return {
        colorOption: {
          size: 'mini',
          columnBtn: false,
          refreshBtn: false,
          menuWidth: 100,
          labelWidth: 100,
          dialogHeight: 150,
          dialogWidth: 200,
          column: [{
            label: '颜色1',
            prop: 'color1',
            type: 'color',
          }, {
            label: '渐变色',
            prop: 'color2',
            type: 'color',
          }, {
            label: '位置',
            prop: 'postion',
            type: 'number'
          }]
        },
        formOption: {
          menuBtn: false,
          labelWidth: 120,
          group: [{
            label: '标题设置',
            column: [{
              label: '标题',
              prop: 'title',
              span: 24
            }, {
              label: '标题位置',
              prop: 'titlePostion',
              type: 'radio',
              border: true,
              size: 'mini',
              span: 24,
              dicData: [{
                label: '左',
                value: ''
              }, {
                label: '中',
                value: 'center'
              }, {
                label: '右',
                value: 'right'
              }]
            }, {
              label: '标题链接',
              prop: 'titleLink',
              span: 24
            }, {
              label: '标题隐藏',
              prop: 'titleShow',
              type: 'switch',
              span: 24
            }, {
              label: '图表简介',
              prop: 'info',
              type: 'textarea',
              minRows: 6,
              span: 24
            }]
          }, {
            label: '坐标轴边距设置',
            column: [{
              label: '宽度',
              prop: 'width',
              span: 24,
              type: 'number',
            }, {
              label: '高度',
              prop: 'height',
              span: 24,
              type: 'number',
            }, {
              label: '左边距(像素)',
              prop: 'gridX',
              span: 24,
              type: 'number',
            }, {
              label: '顶边距(像素)',
              prop: 'gridY',
              span: 24,
              type: 'number',
            }, {
              label: '右边距(像素)',
              prop: 'gridX2',
              span: 24,
              type: 'number',
            }, {
              label: '底边距(像素)',
              prop: 'gridY2',
              span: 24,
              type: 'number',
            }]
          }, {
            label: '自定义配色',
            column: [{
              label: '文字颜色',
              prop: 'nameColor',
              type: 'color',
              span: 24
            }, {
              label: '轴线颜色',
              prop: 'lineColor',
              type: 'color',
              span: 24
            }, {
              labelPosition: 'top',
              label: '柱体颜色',
              prop: 'barColor',
              formslot: true,
              span: 24
            }]
          }, {
            label: 'X轴设置',
            column: [{
              label: '显示X轴',
              prop: 'xAxisShow',
              type: 'switch',
            }, {
              label: '显示X轴网格线',
              prop: 'xAxisSplitLineShow',
              type: 'switch',
            }, {
              label: 'X轴反转',
              prop: 'xAxisInverse',
              type: 'switch',
            }, {
              label: 'X轴字号',
              prop: 'xNameFontSize',
              type: 'number',
              span: 24
            }]
          }, {
            label: '柱顶设置',
            column: [{
              label: '显示柱顶数字',
              prop: 'labelShow',
              type: 'switch',
            }, {
              label: '柱顶字体大小',
              prop: 'labelShowFontSize',
              type: 'number',
              span: 24
            }, {
              label: '柱顶字体粗细',
              prop: 'labelShowFontWeight',
              type: 'radio',
              dicData: [{
                label: '细',
                value: 300
              }, {
                label: '粗',
                value: 500
              }],
              span: 24
            }]
          }, {
            label: '柱体设置',
            column: [{
              label: '柱体最大宽度',
              prop: 'barWidth',
              type: 'number',
              span: 24,
            }, {
              label: '柱体圆角',
              prop: 'barRadius',
              type: 'number',
              span: 24,
            }, {
              label: '柱体最小高度',
              prop: 'barMinHeight',
              type: 'number',
              span: 24,
            }]
          }, {
            label: 'Y轴设置',
            column: [{
              label: 'Y轴反转',
              prop: 'yAxisInverse',
              type: 'switch',
            }, {
              label: '显示Y轴',
              prop: 'yAxisShow',
              type: 'switch',
            }, {
              label: '显示Y轴网格线',
              prop: 'yAxisSplitLineShow',
              type: 'switch',
            }, {
              label: 'Y轴字号',
              prop: 'yNameFontSize',
              type: 'number',
              span: 24
            }]
          }]
        },
        config: {
          title: '手机大比拼',
          titlePostion: '',
          titleLink: "http://avue.top",
          width: '100%',
          height: 500,
          gridX: 65,
          gridY: 20,
          gridX2: 20,
          gridY2: 60,
          nameColor: '#333',
          lineColor: '#333',
          xNameFontSize: 14,
          yNameFontSize: 14,
          labelShow: false,
          labelShowFontSize: 14,
          labelShowFontWeight: 300,
          yAxisInverse: false,
          xAxisInverse: false,
          xAxisShow: true,
          yAxisShow: true,
          xAxisSplitLineShow: true,
          yAxisSplitLineShow: true,
          barWidth: 40,
          barRadius: 3,
          barColor: [{
            color1: '#83bff6',
            color2: '#188df0',
            postion: 90
          }],
          barMinHeight: 0,
        }
      }
    },
    computed: {
      option() {
        return Object.assign(this.config, {
          categories: [
            "苹果",
            "三星",
            "华为",
            "oppo",
            "vivo",
            "小米"
          ],
          series: [
            {
              name: "手机品牌",
              data: [
                1000879,
                678564,
                897744,
                439087,
                478900,
                390877
              ]
            }, {
              name: "其他手机品牌",
              data: [
                2000879,
                678564,
                697744,
                439087,
                778900,
                190877
              ]
            }
          ]
        })
      }
    }, methods: {
      rowSave(row, done) {
        this.config.barColor.push(row);
        done()
      },
      rowDel(row, index) {
        this.config.barColor.splice(index, 1);
      },
      rowUpdate(row, index, done) {
        this.config.barColor.splice(index, 1, row);
        done()
      }
    }
  })
</script>

</html>