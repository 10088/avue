<!DOCTYPE html>

<html class="no-js">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title></title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.js"></script>
  <script src="https://cdn.bootcss.com/vue/2.5.17/vue.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.4.9/theme-chalk/index.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.4.9/index.js"></script>
  <link rel="stylesheet" href="https://cdn.bootcss.com/animate.css/3.7.0/animate.min.css" />
  <link rel="stylesheet" href="../../../lib/index.css" />
  <script src="../../../lib/avue.js"></script>
  <!-- CDNJS :: Sortable (https://cdnjs.com/) -->
  <script src="//cdn.jsdelivr.net/npm/sortablejs@1.8.4/Sortable.min.js"></script>
  <!-- CDNJS :: Vue.Draggable (https://cdnjs.com/) -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/Vue.Draggable/2.19.2/vuedraggable.umd.min.js"></script>
  <script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    html,
    body,
    #app,
    .app {
      height: 100%;
    }

    img {
      user-select: none;
    }

    .app {
      padding: 5px;
      display: flex;
      box-sizing: border-box;
    }


    .menu {
      margin: 0 5px;
      width: 150px;
      height: 100%;
      overflow: hidden;
      overflow-y: auto;
      border: 1px solid #eee;
    }

    .menu__item {
      width: 100%;
      height: 40px;
      line-height: 40px;
      text-indent: 1em;
      font-size: 14px;
      border: 1px solid #eee;
    }

    .menu__item:hover {
      border: 1px dashed #09f;
      cursor: move;
    }

    .menu__item--active {
      border: 1px dashed #09f;
    }

    .wrapper {
      position: relative;
      width: calc(100% - 220px);
      height: 100%;
      overflow: auto;
      border: 1px solid #eee;
    }

    .container {
      user-select: none;
      transform-origin: 0 0;
      position: relative;
    }

    .grade {
      width: 100%;
      height: 100%;
      background-size: 30px 30px, 30px 30px;
      background-image: linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 0px), linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 0px);
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
    }

    .title {
      margin-bottom: 10px;
      line-height: 40px;
      height: 40px;
      text-align: center;
      font-weight: 500;
      font-size: 16px;
      letter-spacing: 2px;
      text-indent: 2px;
      background-color: #eee;
    }

    .params {
      width: 350px;
    }
  </style>
</head>

<body>
  <div id="app">
    <div class="app">
      <div class="menu">
        <p class="title">图层</p>
        <draggable v-model="menuList">
          <div class="menu__item" :class="{'menu__item--active':item.index===active}" v-for="(item,index) in menuList"
            :key="index" @click="active=item.index">
            {{item.title}}
          </div>
        </draggable>
      </div>

      <div class="wrapper">
        <div class="container" :style="styleName" ref="container">
          <div class="grade" @mousedown.stop.self="handleMouseDown" v-if="gradeFlag || config.gradeShow"
            :style="gradeLenStyle"></div>
          <avue-draggable :ref="'item_'+index" :step="2" @focus="handleFocus" @postion="handlePostion"
            @resize="handleResize" @blur="handleBlur" @change="handleChange" :index="index" :z-index="item.zIndex"
            v-for="(item,index) in list" :width="item.component.width" :height="item.component.height" :key="index"
            :top="item.top" :left="item.left">
            <img v-if="['img'].includes(item.component.prop)" :src="item.component.value" draggable="false" />
            <div v-else-if="['text'].includes(item.component.prop)" :style="handleStyle(item)">
              {{item.component.value}}</div>
            <component :id="'component_'+index" v-else :is="item.component.name" :component="item.component"
              :data="item.component.data" :option="item.component.option">
            </component>
          </avue-draggable>
        </div>
      </div>
      <div class="menu params">
        <p class="title">操作</p>
        <template v-if="activeComponent.prop==='text'">
          <el-form label-width="80px">
            <el-form-item label="图层名称">
              <avue-input v-model="activeObj.name"></avue-input>
            </el-form-item>
            <el-form-item label="文本内容">
              <avue-input v-model="activeComponent.value"></avue-input>
            </el-form-item>
            <el-form-item label="字体大小">
              <avue-silder v-model="activeComponent.style.fontSize"></avue-silder>
            </el-form-item>
            <el-form-item label="字体颜色">
              <avue-color v-model="activeComponent.style.color"></avue-color>
            </el-form-item>
            <el-form-item label="字体背景">
              <avue-color v-model="activeComponent.style.backgroundColor"></avue-color>
            </el-form-item>
            <el-form-item label="文字粗细">
              <avue-select v-model="activeComponent.style.fontWeight"
                :dic="[{label:'normal',value:'normal'},{label:'bold',value:'bold'},{label:'bolder',value:'bolder'},{label:'ligter',value:'ligter'}]">
              </avue-select>
            </el-form-item>
            <el-form-item label="对齐方式">
              <avue-select v-model="activeComponent.style.textAlign"
                :dic="[{label:'居中',value:'center'},{label:'左对齐',value:'left'},{label:'右对齐',value:'right'}]">
              </avue-select>
            </el-form-item>
          </el-form>
        </template>
        <template v-else-if="activeComponent.prop==='img'">
          <el-form label-width="80px">
            <el-form-item label="图层名称">
              <avue-input v-model="activeObj.name"></avue-input>
            </el-form-item>
            <el-form-item label="缩略图">
              <img :src="activeComponent.value" alt="" width="100%" />
            </el-form-item>
            <el-form-item label="图片地址">
              <avue-input v-model="activeComponent.value"></avue-input>
            </el-form-item>
          </el-form>
        </template>
        <template v-else-if="activeComponent.prop==='progress'">
          <el-form label-width="80px">
            <el-form-item label="图层名称">
              <avue-input v-model="activeObj.name"></avue-input>
            </el-form-item>
            <el-form-item label="字体大小">
              <avue-silder v-model="activeComponent.option.fontSize" :max="200"></avue-silder>
            </el-form-item>
            <el-form-item label="边框大小">
              <avue-silder v-model="activeComponent.option.strokeWidth" :max="50"></avue-silder>
            </el-form-item>
            <el-form-item label="字体颜色">
              <avue-color v-model="activeComponent.option.color"></avue-color>
            </el-form-item>
            <el-form-item label="文字粗细">
              <avue-select v-model="activeComponent.option.fontWeight"
                :dic="[{label:'normal',value:'normal'},{label:'bold',value:'bold'},{label:'bolder',value:'bolder'},{label:'ligter',value:'ligter'}]">
              </avue-select>
            </el-form-item>
            <el-form-item label="边框颜色">
              <avue-color v-model="activeComponent.option.borderColor"></avue-color>
            </el-form-item>
          </el-form>
        </template>
        <template v-else-if="activeComponent.prop==='flop'">
          <el-form label-width="80px">
            <el-form-item label="图层名称">
              <avue-input v-model="activeObj.name"></avue-input>
            </el-form-item>
            <el-form-item label="字体大小">
              <avue-silder v-model="activeComponent.option.fontSize" :max="200"></avue-silder>
            </el-form-item>
            <el-form-item label="字体颜色">
              <avue-color v-model="activeComponent.option.color"></avue-color>
            </el-form-item>
            <el-form-item label="字体间距">
              <avue-silder v-model="activeComponent.option.split"></avue-silder>
            </el-form-item>
            <el-form-item label="文字粗细">
              <avue-select v-model="activeComponent.option.fontWeight"
                :dic="[{label:'normal',value:'normal'},{label:'bold',value:'bold'},{label:'bolder',value:'bolder'},{label:'ligter',value:'ligter'}]">
              </avue-select>
            </el-form-item>
            <el-form-item label="边框">
              <avue-radio v-model="activeComponent.option.type"
                :dic="[{label:'无边框',value:''},{label:'内置图片',value:'img'},{label:'内置边框',value:'border'}]">
                </avue-select>
            </el-form-item>
            <template v-if="activeComponent.option.type==='img'">
              <el-form-item label="图层名称">
                <avue-input v-model="activeObj.name"></avue-input>
              </el-form-item>
              <el-form-item label="背景图片">
                <img :src="item" v-for="(item,index) in activeComponent.list" :key="index"
                  @click="activeComponent.option.backgroundImage=item">
              </el-form-item>
            </template>
            <template v-else-if="activeComponent.option.type==='border'">
              <el-form-item label="边框颜色">
                <avue-color v-model="activeComponent.option.borderColor"></avue-color>
              </el-form-item>
              <el-form-item label="边框宽度">
                <avue-silder v-model="activeComponent.option.borderWidth" :max="10"></avue-silder>
              </el-form-item>
            </template>
            <el-form-item label="背景颜色">
              <avue-color v-model="activeComponent.option.backgroundColor"></avue-color>
            </el-form-item>
            <el-form-item label="前缀内容">
              <avue-input v-model="activeComponent.option.prefixText"></avue-input>
            </el-form-item>
            <el-form-item label="对其方式">
              <avue-select v-model="activeComponent.option.prefixTextAlign"
                :dic="[{label:'居中',value:'center'},{label:'左对齐',value:'left'},{label:'右对齐',value:'right'}]">
              </avue-select>
            </el-form-item>
            <el-form-item label="间距">
              <avue-silder v-model="activeComponent.option.prefixSplit"></avue-silder>
            </el-form-item>
            <el-form-item label="颜色">
              <avue-color v-model="activeComponent.option.prefixColor"></avue-color>
            </el-form-item>
            <el-form-item label="字体大小">
              <avue-silder v-model="activeComponent.option.prefixFontSize" :max="200"></avue-silder>
            </el-form-item>
            <el-form-item label="后缀内容">
              <avue-input v-model="activeComponent.option.suffixText"></avue-input>
            </el-form-item>
            <el-form-item label="对其方式">
              <avue-select v-model="activeComponent.option.suffixTextAlign"
                :dic="[{label:'居中',value:'center'},{label:'左对齐',value:'left'},{label:'右对齐',value:'right'}]">
              </avue-select>
            </el-form-item>
            <el-form-item label="间距">
              <avue-silder v-model="activeComponent.option.suffixSplit"></avue-silder>
            </el-form-item>
            <el-form-item label="颜色">
              <avue-color v-model="activeComponent.option.suffixColor"></avue-color>
            </el-form-item>
            <el-form-item label="字体大小">
              <avue-silder v-model="activeComponent.option.suffixFontSize" :max="200"></avue-silder>
            </el-form-item>
          </el-form>
        </template>
        <template v-else-if="activeComponent.prop==='bar'">
          <el-form label-width="80px">
            <el-form-item label="图层名称">
              <avue-input v-model="activeObj.name"></avue-input>
            </el-form-item>
            <el-form-item label="数据刷新">
              <avue-input v-model="activeComponent.option.refreshTime"></avue-input>
            </el-form-item>
            <el-form-item label="标题">
              <avue-input type="textarea" v-model="activeComponent.option.title"></avue-input>
            </el-form-item>
            <el-form-item label="标题大小">
              <avue-silder v-model="activeComponent.option.titleFontSize"></avue-silder>
            </el-form-item>
            <el-form-item label="标题颜色">
              <avue-color v-model="activeComponent.option.titleColor"></avue-color>
            </el-form-item>
            <el-form-item label="标题对其">
              <avue-select v-model="activeComponent.option.titlePostion"
                :dic="[{label:'居中',value:'center'},{label:'左对齐',value:''},{label:'右对齐',value:'right'}]">
              </avue-select>
            </el-form-item>
            <el-form-item label="标题隐藏">
              <avue-switch v-model="activeComponent.option.titleShow"></avue-switch>
            </el-form-item>
            <el-form-item label="标题链接">
              <avue-input type="textarea" v-model="activeComponent.option.titleLink"></avue-input>
            </el-form-item>
            <el-form-item label="文字颜色">
              <avue-color v-model="activeComponent.option.nameColor">
              </avue-color>
            </el-form-item>
            <el-form-item label="轴线颜色">
              <avue-color v-model="activeComponent.option.lineColor"></avue-color>
            </el-form-item>
            <avue-crud :option="colorOption" :data="activeComponent.option.barColor" @row-save="rowSave"
              @row-del="rowDel" @row-update="rowUpdate"></avue-crud>
          </el-form>
        </template>
        <template v-else>
          <el-form label-width="80px">
            <el-form-item label="大屏名称">
              <avue-input v-model="config.name"></avue-input>
            </el-form-item>
            <el-form-item label="大屏宽度">
              <avue-input-number v-model="config.width"></avue-input-number>
            </el-form-item>
            <el-form-item label="大屏高度">
              <avue-input-number v-model="config.height"></avue-input-number>
            </el-form-item>
            <el-form-item label="缩放比例">
              <el-slider v-model="config.scale" :max="200" :format-tooltip="formatTooltip"></el-slider>
            </el-form-item>
            <el-form-item label="缩略图">
              <img :src="config.backgroundImage" alt="" width="100%" />
            </el-form-item>
            <el-form-item label="背景图片">
              <avue-input v-model="config.backgroundImage"></avue-input>
            </el-form-item>
            <el-form-item label="显示网格">
              <avue-switch v-model="config.gradeShow"></avue-switch>
            </el-form-item>
            <el-form-item label="网格间距">
              <avue-input-number v-model="config.gradeLen"></avue-input-number>
            </el-form-item>
          </el-form>
        </template>
      </div>
    </div>
  </div>
</body>
<script>
  new Vue({
    el: '#app',
    data() {
      return {
        gradeFlag: false,
        form: {},
        colorOption: {
          size: 'mini',
          columnBtn: false,
          refreshBtn: false,
          menuWidth: 150,
          labelWidth: 100,
          dialogHeight: 150,
          dialogWidth: 200,
          column: [{
            label: '颜色1',
            prop: 'color1',
            type: 'color',
          }, {
            label: '渐变色',
            prop: 'color2',
            type: 'color',
          }, {
            label: '位置',
            prop: 'postion',
            type: 'number'
          }]
        },

        config: {
          name: 'avuex数据大屏',
          width: 1920,
          height: 1080,
          scale: 1,
          backgroundImage: 'https://sugar.bce.baidu.com/static/img-templet/background-2.png',
          gradeShow: true,
          gradeLen: 30,
        },
        active: -1,
        menuList: [],
        list: [{
          "name": "柱状图",
          "title": "柱状图",
          "top": 276,
          "left": 536,
          "zIndex": 1,
          "component": {
            "width": 1200,
            "height": 600,
            "name": "avue-echart-bar",
            "prop": "bar",
            "option": {
              "refreshTime": 5000,
              "title": "2019年度潍坊城市销售额排名",
              "titlePostion": "",
              "titleFontSize": 24,
              "titleColor": "rgb(115, 170, 229)",
              "titleLink": "http://avue.top",
              "info": "这是图表的简介",
              "width": 1282,
              "height": 600,
              "gridX": 105,
              "gridY": 50,
              "gridX2": 80,
              "gridY2": 100,
              "nameColor": "#eee",
              "lineColor": "#eee",
              "xNameFontSize": 16,
              "yNameFontSize": 16,
              "labelShow": false,
              "labelShowFontSize": 14,
              "labelShowFontWeight": 300,
              "yAxisInverse": false,
              "xAxisInverse": false,
              "xAxisShow": true,
              "yAxisShow": true,
              "xAxisSplitLineShow": false,
              "yAxisSplitLineShow": false,
              "refresh": 3000,
              "barWidth": 30,
              "barRadius": 8,
              "barColor": [{
                "color1": "#83bff6",
                "color2": "#188df0",
                "postion": 90,
                "$index": 0,
                "_show": true
              }, {
                "color1": "#23B7E5",
                "color2": "#564AA3",
                "postion": 50,
                "$index": 1,
                "_show": true
              }],
              "barMinHeight": 2
            },
            "data": {
              "categories": ["北京", "上海", "杭州", "深圳", "杭州", "深圳", "广州", "连云港"],
              "series": [{
                "name": "手机品牌",
                "data": [1131776, 1349011, 905718, 1349011, 905718, 656020, 571234, 467397]
              }, {
                "name": "其他手机品牌",
                "data": [1131776, 1349011, 905718, 1349011, 905718, 656020, 571234, 467397]
              }]
            }
          },
          "index": 0
        }, {
          "title": "图片框",
          "name": "图片框",
          "top": 0,
          "left": 115,
          "zIndex": 13,
          "component": {
            "width": 1700,
            "height": 146,
            "name": "img",
            "prop": "img",
            "value": "https://sugar.bce.baidu.com/static/img-templet/pic-2.png"
          },
          "index": 1
        }, {
          "title": "图片框",
          "name": "图片框",
          "top": 900,
          "left": 115,
          "zIndex": 12,
          "component": {
            "width": 1700,
            "height": 146,
            "name": "img",
            "prop": "img",
            "value": "https://sugar.bce.baidu.com/static/img-templet/pic-1.png"
          },
          "index": 2
        }, {
          "title": "图片框",
          "name": "图片框",
          "top": 20,
          "left": 20,
          "zIndex": 11,
          "component": {
            "name": "img",
            "prop": "img",
            "value": "https://sugar.bce.baidu.com/static/img-templet/pic-8.png "
          },
          "index": 3
        }, {
          "title": "图片框",
          "name": "图片框",
          "top": 344,
          "left": 10,
          "zIndex": 10,
          "component": {
            "width": 80,
            "height": 80,
            "name": "img",
            "prop": "img",
            "value": "https://sugar.bce.baidu.com/static/img-templet/pic-4.png"
          },
          "index": 4
        }, {
          "title": "图片框",
          "name": "图片框",
          "top": 340,
          "left": 230,
          "zIndex": 9,
          "component": {
            "width": 80,
            "height": 80,
            "name": "img",
            "prop": "img",
            "value": "https://sugar.bce.baidu.com/static/img-templet/pic-5.png"
          },
          "index": 5
        }, {
          "title": "图片框",
          "name": "图片框",
          "top": 479,
          "left": 10,
          "zIndex": 8,
          "component": {
            "width": 80,
            "height": 80,
            "name": "img",
            "prop": "img",
            "value": "https://sugar.bce.baidu.com/static/img-templet/pic-6.png"
          },
          "index": 6
        }, {
          "title": "图片框",
          "name": "图片框",
          "top": 481,
          "left": 232,
          "zIndex": 7,
          "component": {
            "width": 80,
            "height": 80,
            "name": "img",
            "prop": "img",
            "value": "https://sugar.bce.baidu.com/static/img-templet/pic-7.png"
          },
          "index": 7
        }, {
          "title": "翻牌器",
          "name": "翻牌器",
          "top": 230,
          "left": 1140,
          "zIndex": 6,
          "component": {
            "width": 750,
            "height": 120,
            "name": "avue-echart-flop",
            "prop": "flop",
            "data": "1201009,2",
            "list": ["https://sugar.bce.baidu.com/static/img-templet/border-1.png", "https://sugar.bce.baidu.com/static/img-templet/border-2.png"],
            "option": {
              "type": "img",
              "borderColor": "#fff",
              "borderWidth": 3,
              "backgroundImage": "https://sugar.bce.baidu.com/static/img-templet/border-1.png",
              "fontSize": 64,
              "fontWeight": "normal",
              "split": 3,
              "backgroundColor": "rgb(15, 57, 107)",
              "color": "#fff"
            }
          },
          "index": 8
        }, {
          "title": "翻牌器",
          "name": "翻牌器",
          "top": 344,
          "left": 100,
          "zIndex": 5,
          "component": {
            "width": 230,
            "height": 100,
            "name": "avue-echart-flop",
            "prop": "flop",
            "data": "71.9",
            "list": ["https://sugar.bce.baidu.com/static/img-templet/border-1.png", "https://sugar.bce.baidu.com/static/img-templet/border-2.png"],
            "option": {
              "type": "",
              "suffixText": "订单总数(万)",
              "suffixTextAlign": "",
              "suffixSplit": 5,
              "suffixColor": "rgba(176, 194, 249, 1)",
              "suffixFontSize": 16,
              "borderColor": "#fff",
              "borderWidth": 3,
              "backgroundImage": "https://sugar.bce.baidu.com/static/img-templet/border-1.png",
              "fontSize": 42,
              "fontWeight": "normal",
              "split": 0,
              "backgroundColor": "",
              "color": "#fff"
            }
          },
          "index": 9
        }, {
          "title": "翻牌器",
          "name": "翻牌器",
          "top": 346,
          "left": 320,
          "zIndex": 4,
          "component": {
            "width": 230,
            "height": 100,
            "name": "avue-echart-flop",
            "prop": "flop",
            "data": "16.24",
            "list": ["https://sugar.bce.baidu.com/static/img-templet/border-1.png", "https://sugar.bce.baidu.com/static/img-templet/border-2.png"],
            "option": {
              "type": "",
              "suffixText": "销售总量（万元）",
              "suffixTextAlign": "",
              "suffixSplit": 5,
              "suffixColor": "rgba(176, 194, 249, 1)",
              "suffixFontSize": 16,
              "borderColor": "#fff",
              "borderWidth": 3,
              "backgroundImage": "https://sugar.bce.baidu.com/static/img-templet/border-1.png",
              "fontSize": 42,
              "fontWeight": "normal",
              "split": 0,
              "backgroundColor": "",
              "color": "#fff"
            }
          },
          "index": 10
        }, {
          "title": "翻牌器",
          "name": "翻牌器",
          "top": 478,
          "left": 102,
          "zIndex": 3,
          "component": {
            "width": 230,
            "height": 100,
            "name": "avue-echart-flop",
            "prop": "flop",
            "data": "10.5",
            "list": ["https://sugar.bce.baidu.com/static/img-templet/border-1.png", "https://sugar.bce.baidu.com/static/img-templet/border-2.png"],
            "option": {
              "type": "",
              "suffixText": "人均消费",
              "suffixTextAlign": "",
              "suffixSplit": 5,
              "suffixColor": "rgba(176, 194, 249, 1)",
              "suffixFontSize": 16,
              "borderColor": "#fff",
              "borderWidth": 3,
              "backgroundImage": "https://sugar.bce.baidu.com/static/img-templet/border-1.png",
              "fontSize": 42,
              "fontWeight": "normal",
              "split": 0,
              "backgroundColor": "",
              "color": "#fff"
            }
          },
          "index": 11
        }, {
          "title": "翻牌器",
          "name": "翻牌器",
          "top": 478,
          "left": 322,
          "zIndex": 2,
          "component": {
            "width": 230,
            "height": 100,
            "name": "avue-echart-flop",
            "prop": "flop",
            "data": "75",
            "list": ["https://sugar.bce.baidu.com/static/img-templet/border-1.png", "https://sugar.bce.baidu.com/static/img-templet/border-2.png"],
            "option": {
              "type": "",
              "suffixText": "近10分钟新增订单数(万)",
              "suffixTextAlign": "",
              "suffixSplit": 5,
              "suffixColor": "rgba(176, 194, 249, 1)",
              "suffixFontSize": 16,
              "borderColor": "#fff",
              "borderWidth": 3,
              "backgroundImage": "https://sugar.bce.baidu.com/static/img-templet/border-1.png",
              "fontSize": 42,
              "fontWeight": "normal",
              "split": 0,
              "backgroundColor": "",
              "color": "#fff"
            }
          },
          "index": 12
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 14,
          "left": 702,
          "zIndex": 26,
          "component": {
            "width": 490,
            "height": 50,
            "value": "avuex数据大屏实时展示",
            "style": {
              "textAlign": "center",
              "fontSize": 40,
              "fontWeight": "bold",
              "color": "#fff"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 13
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 120,
          "left": 1122,
          "zIndex": 25,
          "component": {
            "width": 100,
            "height": 50,
            "value": "电商数据",
            "style": {
              "textAlign": "center",
              "fontSize": 22,
              "fontWeight": "normal",
              "color": "rgba(154, 168, 212, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 14
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 120,
          "left": 1250,
          "zIndex": 24,
          "component": {
            "width": 100,
            "height": 50,
            "value": "Sell Data",
            "style": {
              "textAlign": "center",
              "fontSize": 20,
              "fontWeight": "normal",
              "color": "rgba(64, 77, 105, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 15
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 276,
          "left": 15,
          "zIndex": 23,
          "component": {
            "width": 100,
            "height": 50,
            "value": "数据统计",
            "style": {
              "textAlign": "center",
              "fontSize": 22,
              "fontWeight": "normal",
              "color": "rgba(154, 168, 212, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 16
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 278,
          "left": 350,
          "zIndex": 22,
          "component": {
            "width": 150,
            "height": 50,
            "value": "Statistics Data",
            "style": {
              "textAlign": "center",
              "fontSize": 20,
              "fontWeight": "normal",
              "color": "rgba(64, 77, 105, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 17
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 124,
          "left": 320,
          "zIndex": 21,
          "component": {
            "width": 150,
            "height": 50,
            "value": "完成的百分比",
            "style": {
              "textAlign": "center",
              "fontSize": 20,
              "fontWeight": "normal",
              "color": "rgba(64, 77, 105, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 18
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 180,
          "left": 1104,
          "zIndex": 20,
          "component": {
            "width": 100,
            "height": 50,
            "value": "销售量",
            "style": {
              "textAlign": "center",
              "fontSize": 16,
              "fontWeight": "normal",
              "color": "rgba(154, 168, 212, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 19
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 180,
          "left": 1760,
          "zIndex": 19,
          "component": {
            "width": 100,
            "height": 50,
            "value": "万元",
            "style": {
              "textAlign": "center",
              "fontSize": 16,
              "fontWeight": "normal",
              "color": "rgba(154, 168, 212, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 20
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 646,
          "left": 15,
          "zIndex": 18,
          "component": {
            "width": 100,
            "height": 50,
            "value": "交易统计",
            "style": {
              "textAlign": "center",
              "fontSize": 22,
              "fontWeight": "normal",
              "color": "rgba(154, 168, 212, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 21
        }, {
          "title": "文本框",
          "name": "文本框",
          "top": 650,
          "left": 350,
          "zIndex": 17,
          "component": {
            "width": 150,
            "height": 50,
            "value": "Count Data",
            "style": {
              "textAlign": "center",
              "fontSize": 20,
              "fontWeight": "normal",
              "color": "rgba(64, 77, 105, 1)"
            },
            "name": "text",
            "prop": "text"
          },
          "index": 22
        }, {
          "title": "进度条",
          "name": "进度条",
          "top": 736,
          "left": 40,
          "zIndex": 16,
          "component": {
            "width": 200,
            "height": 200,
            "data": {
              "label": "订单交易",
              "value": 300,
              "data": 30
            },
            "option": {
              "width": 200,
              "type": "circle",
              "color": "rgba(154, 168, 212, 1)",
              "fontSize": 24,
              "strokeWidth": 14,
              "fontWeight": "normal",
              "borderColor": "#23b7e5",
              "height": 200
            },
            "name": "avue-echart-progress",
            "prop": "progress"
          },
          "index": 23
        }, {
          "title": "进度条",
          "name": "进度条",
          "top": 738,
          "left": 300,
          "zIndex": 15,
          "component": {
            "width": 200,
            "height": 200,
            "data": {
              "label": "人数增涨",
              "value": 40,
              "data": 80
            },
            "option": {
              "width": 200,
              "type": "circle",
              "color": "rgba(154, 168, 212, 1)",
              "fontSize": 24,
              "strokeWidth": 14,
              "fontWeight": "normal",
              "borderColor": "#564AA3",
              "height": 200
            },
            "name": "avue-echart-progress",
            "prop": "progress"
          },
          "index": 24
        }, {
          "title": "进度条",
          "name": "进度条",
          "top": 150,
          "left": 60,
          "zIndex": 14,
          "component": {
            "width": 400,
            "height": 80,
            "data": {
              "label": "人数增涨",
              "value": 40,
              "data": 80
            },
            "option": {
              "type": "line",
              "color": "rgba(154, 168, 212, 1)",
              "fontSize": 24,
              "strokeWidth": 18,
              "fontWeight": "normal",
              "borderColor": "#564AA3",
              "width": 400,
              "height": 80
            },
            "name": "avue-echart-progress",
            "prop": "progress"
          },
          "index": 25
        }]
      }
    },
    computed: {
      activeComponent() {
        return this.activeObj.component || {}
      },
      activeObj() {
        return this.list[this.active] || {}
      },
      styleName() {
        const scale = this.config.scale;
        return {
          transform: `scale(${scale / 100}, ${scale / 100})`,
          background: `url(${this.config.backgroundImage}) 0% 0% / 100% 100% rgb(3, 12, 59)`,
          width: this.setPx(this.config.width),
          height: this.setPx(this.config.height)
        }
      },
      gradeLenStyle() {
        return {
          backgroundSize: `${this.setPx(this.config.gradeLen)} ${this.setPx(this.config.gradeLen)},${this.setPx(this.config.gradeLen)} ${this.setPx(this.config.gradeLen)}`
        }
      }
    },
    created() {
      //初始化数据
      this.initData()
    },
    mounted() {
      this.$nextTick(() => {
        const swidth = window.document.body.clientWidth - 450;
        const scale = swidth / this.config.width
        this.config.scale = scale * 100
      })
    },
    watch: {
      active(val) {
        this.list.forEach((ele, index) => {
          if (index === val) {
            this.$refs['item_' + index][0].setActive(true)
          } else {
            this.$refs['item_' + index][0].setActive(false)
          }
        });
      },
      menuList(val) {
        const leng = val.length;
        val.forEach((ele, index) => {
          this.$set(this.list, ele.index, Object.assign(ele, {
            zIndex: leng - index
          }))
        })
      }
    },
    methods: {
      formatTooltip(val) {
        return parseInt(val);
      },
      handleStyle(item) {
        const style = item.component.style
        let obj = {
          padding: '10px'
        }
        Object.keys(style).forEach(ele => {
          if (['fontSize'].includes(ele)) {
            obj[ele] = style[ele] + 'px'
          } else {
            obj[ele] = style[ele]
          }

        })
        return obj;
      },
      initData() {
        this.list.forEach((ele, index) => {
          this.$set(this.list, index, Object.assign(ele, {
            index
          }));
        })

        this.menuList = [...this.list];
        this.handleListMenuSort();
      },
      handleListMenuSort() {
        function compare(propertyName) {
          return function (object1, object2) {
            var value1 = object1[propertyName];
            var value2 = object2[propertyName];
            if (value2 < value1) {
              return -1;
            } else if (value2 > value1) {
              return 1;
            } else {
              return 0;
            }
          }
        }
        this.menuList.sort(compare("zIndex"));
      },
      handleMouseDown() {
        this.active = -1;
      },
      handleChange(index) {
        this.active = index;
      },
      handleFocus() {
        this.gradeFlag = true;
      },
      handleBlur() {
        this.gradeFlag = false;
      },
      handleResize({ index, width, height }) {
        const ele = this.list[index].component.option;
        if (['bar', 'progress'].includes(this.activeComponent.prop)) {
          this.$set(ele, 'width', width)
          this.$set(ele, 'height', height)
        }

      },
      handlePostion({ index, left, top }) {
        const ele = this.list[index];
        this.$set(ele, 'left', left)
        this.$set(ele, 'top', top)
      },
      rowSave(row, done) {
        this.activeComponent.option.barColor.push(row);
        done()
      },
      rowDel(row, index) {
        this.activeComponent.option.barColor.splice(index, 1);
      },
      rowUpdate(row, index, done) {
        this.activeComponent.option.barColor.splice(index, 1, row);
        done()
      }
    }
  })
</script>

</html>